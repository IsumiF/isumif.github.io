<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>My Hakyll Blog - Build latex with Shake</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="../css/syntax.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">My Hakyll Blog</a>
            </div>
            <nav>
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>
            </nav>
        </header>

        <main role="main">
            <h1>Build latex with Shake</h1>
            <article>
  <section class="header">
    Posted on March 13, 2019
    
  </section>
  <section>
    <p><a href="https://shakebuild.com/">Shake</a> is a powerful build system written in Haskell. Below is a basic build file to compile latex documents.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb1-1" title="1"><span class="ot">#!/usr/bin/env stack</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co">{- stack</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">  script</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">  --resolver lts-13.12</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">  --package shake</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">-}</span></a>
<a class="sourceLine" id="cb1-7" title="7"></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="kw">import</span> <span class="dt">Development.Shake</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="kw">import</span> <span class="dt">Development.Shake.Command</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="kw">import</span> <span class="dt">Development.Shake.FilePath</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="kw">import</span> <span class="dt">Development.Shake.Util</span></a>
<a class="sourceLine" id="cb1-12" title="12"></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="ot">buildDir ::</span> <span class="dt">FilePath</span></a>
<a class="sourceLine" id="cb1-14" title="14">buildDir <span class="fu">=</span> <span class="st">&quot;build&quot;</span></a>
<a class="sourceLine" id="cb1-15" title="15"></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="ot">main ::</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb1-17" title="17">main <span class="fu">=</span> shakeArgs shakeOptions{shakeFiles<span class="fu">=</span>buildDir} <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-18" title="18">    want [buildDir <span class="fu">&lt;/&gt;</span> <span class="st">&quot;report.pdf&quot;</span>]</a>
<a class="sourceLine" id="cb1-19" title="19"></a>
<a class="sourceLine" id="cb1-20" title="20">    phony <span class="st">&quot;clean&quot;</span> <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-21" title="21">      removeFilesAfter <span class="st">&quot;build&quot;</span> [<span class="st">&quot;//*&quot;</span>]</a>
<a class="sourceLine" id="cb1-22" title="22"></a>
<a class="sourceLine" id="cb1-23" title="23">    buildDir <span class="fu">&lt;/&gt;</span> <span class="st">&quot;report.pdf&quot;</span> <span class="fu">%&gt;</span> \out <span class="ot">-&gt;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-24" title="24">      texFiles <span class="ot">&lt;-</span> getDirectoryFiles <span class="st">&quot;&quot;</span> [<span class="st">&quot;//*.tex&quot;</span>]</a>
<a class="sourceLine" id="cb1-25" title="25">      need texFiles</a>
<a class="sourceLine" id="cb1-26" title="26">      images <span class="ot">&lt;-</span> getDirectoryFiles <span class="st">&quot;&quot;</span> [<span class="st">&quot;images//*.png&quot;</span>]</a>
<a class="sourceLine" id="cb1-27" title="27">      need images</a>
<a class="sourceLine" id="cb1-28" title="28">      cmd_ <span class="st">&quot;latexmk -pdf -bibtex -xelatex -interaction=nonstopmode&quot;</span></a>
<a class="sourceLine" id="cb1-29" title="29">        (<span class="st">&quot;-outdir=&quot;</span> <span class="fu">++</span> buildDir)</a>
<a class="sourceLine" id="cb1-30" title="30">        <span class="st">&quot;-shell-escape&quot;</span></a></code></pre></div>
  </section>
</article>
        </main>

        <footer>
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </footer>
    </body>
</html>
